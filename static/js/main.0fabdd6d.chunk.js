(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6),_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9),_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4),_tensorflow_models_posenet__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(20),_index_scss__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(17),_index_scss__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_index_scss__WEBPACK_IMPORTED_MODULE_10__),Pose=function(_Component){function Pose(props){var _this;return Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,Pose),_this=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__.a)(this,Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(Pose).call(this,props)),_this.getVecSimi=function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(t,a){var n,_,r,s,o,c;return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_8__.i(t),_=_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_8__.i(a),e.next=4,_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_8__.h(n.mul(n).sum());case 4:return r=e.sent,e.next=7,_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_8__.h(_.mul(_).sum());case 7:return s=e.sent,o=n.mul(_).sum(),c=o.div(r.mul(s)),e.t0=_this,e.next=13,c.data();case 13:e.t1=e.sent[0],e.t0.scoreHandle.call(e.t0,e.t1);case 15:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),_this.getVecSimi2=function(){var _ref2=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(a,b){var x,y,z,score;return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,Promise.all(a.map(function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(t){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t*t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return x=_context5.sent,_context5.next=5,Promise.all(b.map(function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(t){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t*t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:return y=_context5.sent,x=Math.sqrt(eval(x.join("+"))),y=Math.sqrt(eval(y.join("+"))),_context5.next=10,Promise.all(a.map(function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(t,a){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t*b[a]);case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 10:z=_context5.sent,z=eval(z.join("+")),score=z/(x*y),_this.scoreHandle(score);case 14:case"end":return _context5.stop()}},_callee5)}));return function(e,t){return _ref2.apply(this,arguments)}}(),_this.const={accuracy:.85,ifRenderCamera:!1,catchRate:100,template:["pose11.jpeg","pose12.jpeg","pose13.jpeg"]},_this.state={templateIndex:0,meter:0,streamInfoWarn:!1,streamInfoDown:!1,streamInfoErr:!1,tolong:!1,catching:!1,uploading:!1,initState:!1},_this}return Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.a)(Pose,_Component),Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(Pose,[{key:"render",value:function(){var e=this,t=this.state.initState;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:["pose",t?"":"disable"].join(" ")},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"template"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img",{id:"pose",src:__webpack_require__(41)("./"+this.const.template[this.state.templateIndex]),alt:"pose"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("canvas",{id:"cvsTemplate",className:this.state.tolong?"tolong":""}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"meter"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"content"},"\u76f8\u4f3c\u5ea6:",(100*this.state.meter).toFixed(3),"%"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"status",style:{transform:"scaleX("+this.state.meter+")",background:this.state.meter>this.const.accuracy?"#4fc08d":"#f66"}}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"status-grides"},Array.apply(null,{length:25}).map(function(e,t){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("i",{key:t,style:{left:"calc("+3*t+"% + "+t+"px)"}})})))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"stream"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:["stream-static",this.state.uploading?"act":""].join(" ")}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:["stream-view",this.state.uploading?"":"act"].join(" ")},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("video",{height:"224",width:"224",muted:!0,playsInline:!0,autoPlay:!0,id:"webcam"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("canvas",{id:"cvsView"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"stream-panel"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"console"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{className:["info",this.state.streamInfoWarn||this.state.streamInfoDown||this.state.streamInfoErr?"act":"",this.state.streamInfoDown?"down":""].join(" ")},this.state.streamInfoWarn&&"\u8ddd\u79bb\u5c4f\u5e55\u7a0d\u8fdc\u4e00\u4e9b\uff0c\u8ba9\u8eab\u4f53\u66f4\u591a\u90e8\u5206\u8fdb\u5165\u955c\u5934",this.state.streamInfoErr&&"\u672a\u68c0\u6d4b\u5230\u52a8\u4f5c\u6570\u636e",this.state.streamInfoDown&&"\u5339\u914d\u6210\u529f")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"control"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{onClick:function(){return e.catch()},className:this.state.catching?"act":""},"\u5f00\u59cb"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{onClick:function(){clearInterval(e.timer),e.setState({catching:!1})}},"\u6682\u505c"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{onClick:function(){return e.exchange()}},"\u5207\u6362"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{onClick:function(){return e.upload()}},"\u4e0a\u4f20 ",react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("input",{id:"uploadPic",type:"file"}))))))}},{key:"init",value:function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.adaptive(),e.next=3,_tensorflow_models_posenet__WEBPACK_IMPORTED_MODULE_9__.a();case 3:return this.posenet=e.sent,e.next=6,this.templateInit();case 6:return e.next=8,this.streamInit();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"adaptive",value:function(){var e=this;document.getElementById("pose").onload=function(t){t.target.height>500?e.setState({tolong:!0}):e.setState({tolong:!1})}}},{key:"templateInit",value:function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(){var t,a,n;return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("pose"),a=document.getElementById("cvsTemplate"),e.next=4,this.getPoseData(t);case 4:return n=e.sent,this.draw(t,n,a,!0),e.next=8,this.getPoseVector(n);case 8:this.templateVec=e.sent;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"streamInit",value:function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.webcamSetup();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getPoseData",value:function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(t){var a;return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.posenet.estimateMultiplePoses(t,.5,!1,16,2);case 2:if(!(a=e.sent)[0]){e.next=8;break}return this.setState({streamInfoErr:!1}),e.abrupt("return",a[0].keypoints);case 8:throw this.setState({streamInfoErr:!0}),"\u672a\u68c0\u6d4b\u5230\u52a8\u4f5c\u6570\u636e";case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getPoseVector",value:function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(t){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var a=[];t.map(function(){var n=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function n(_,r){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=a.concat(Object.values(_.position)),r===t.length-1&&e(a);case 2:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"scoreHandle",value:function(e){(e=10*(e-.9))<0&&(e=0),e=Number(e.toString().slice(0,7)),this.setState({meter:e}),e>this.const.accuracy&&(clearInterval(this.timer),this.setState({streamInfoDown:!0}))}},{key:"draw",value:function(e,t,a,n){var _=a,r=_.getContext("2d");_.height=e.height,_.width=e.width,r.font="12px",r.clearRect(0,0,_.height,_.width),n&&r.drawImage(e,0,0),t.map(function(e){r.fillStyle="#42b983",e.score<.3&&(r.fillStyle="#f66"),r.fillRect(e.position.x,e.position.y,5,5),r.fill()})}},{key:"webcamSetup",value:function(){var e=document.getElementById("webcam");return new Promise(function(t,a){var n=navigator;navigator.getUserMedia=navigator.getUserMedia||n.webkitGetUserMedia||n.mozGetUserMedia||n.msGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({video:!0},function(a){e.srcObject=a,e.addEventListener("loadeddata",function(){return t()},!1)},function(e){return a(e)}):a("\u6444\u50cf\u8bbe\u5907\u521d\u59cb\u5316\u5931\u8d25")})}},{key:"catch",value:function(){var e=this;this.state.catching||(this.setState({catching:!0,uploading:!1}),clearInterval(this.timer),setTimeout(Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function t(){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.timer=setInterval(Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function t(){var a,n,_,r;return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.getElementById("webcam"),t.next=3,e.getPoseData(a);case 3:return(n=t.sent).filter(function(e){return e.score>.3}).length<10?e.setState({streamInfo:!0}):e.setState({streamInfo:!1}),_=document.getElementById("cvsView"),e.draw(a,n,_,e.const.ifRenderCamera),t.next=9,e.getPoseVector(n);case 9:return r=t.sent,t.next=12,e.getVecSimi(e.templateVec,r);case 12:case"end":return t.stop()}},t)})),e.const.catchRate);case 1:case"end":return t.stop()}},t)})),100))}},{key:"exchange",value:function(){var e=this.state.templateIndex;e>=this.const.template.length-1?e=0:e+=1,this.setState({templateIndex:e}),this.init()}},{key:"upload",value:function(){var e=this,t=document.getElementById("uploadPic");t.onchange=function(t){if(!t.target.files[0])throw"\u6587\u4ef6\u65e0\u6548";e.reads(t.target.files[0]),e.setState({uploading:!0,catching:!1}),clearInterval(e.timer)},t.click()}},{key:"reads",value:function(e){var t=this,a=new FileReader;a.readAsDataURL(e),a.onload=function(e){var a=document.createElement("img"),n=document.createElement("canvas"),_=document.querySelector(".stream-static");a.src=e.target.result,a.style.display="none",n.style.width="100%",_.childNodes.length>0&&(_.removeChild(_.firstChild),_.removeChild(_.lastChild)),_.appendChild(a),_.appendChild(n),a.onload=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(){var _,r;return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.height>300&&n.setAttribute("style","height:300px;width:auto"),e.next=3,t.getPoseData(a);case 3:return _=e.sent,t.draw(a,_,n,!0),e.next=7,t.getPoseVector(_);case 7:return r=e.sent,e.next=10,t.getVecSimi2(t.templateVec,r);case 10:case"end":return e.stop()}},e)}))}}},{key:"componentDidMount",value:function(){var e=Object(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(){return _Users_browniu_Documents_browniu_dev_brown_shakeYhead_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:this.setState({initState:!0});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),Pose}(react__WEBPACK_IMPORTED_MODULE_7__.Component);__webpack_exports__.default=Pose},,,,function(e,t,a){},,,,,function(e,t,a){e.exports=a(54)},,,,,function(e,t,a){},,function(e,t,a){},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){var n={"./":13,"./index":13,"./index.js":13,"./index.scss":17,"./pose.jpg":42,"./pose10.jpg":43,"./pose11.jpeg":44,"./pose12.jpeg":45,"./pose4.jpg":46,"./pose6.jpeg":47,"./pose7.jpeg":48,"./pose8.jpg":49,"./pose9.jpg":50};function _(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}_.keys=function(){return Object.keys(n)},_.resolve=r,e.exports=_,_.id=41},function(e,t,a){e.exports=a.p+"static/media/pose.cd91047a.jpg"},function(e,t,a){e.exports=a.p+"static/media/pose10.0ada55ed.jpg"},function(e,t,a){e.exports=a.p+"static/media/pose11.f2493662.jpeg"},function(e,t,a){e.exports=a.p+"static/media/pose12.61a0dff7.jpeg"},function(e,t,a){e.exports=a.p+"static/media/pose4.41a1e0b2.jpg"},function(e,t,a){e.exports=a.p+"static/media/pose6.f3643295.jpeg"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISEhUSEBIVFRAVFRUQFRUPFRUQFRUQFRUWFhUVFRUYHSggGBolHRUVITEhJSkrLi4uGB8zODMsNygtLisBCgoKDg0OGxAQGy0lHSUtLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLf/AABEIAOEA4QMBIgACEQEDEQH/xAAcAAACAwEBAQEAAAAAAAAAAAAAAQIDBAUGBwj/xABAEAACAQIEAwUFBgQFAwUAAAABAgADEQQSITEFQVEGImFxgRMykaGxB3LB0eHwFEJSsiMzYoLxc6LCFRY0g5L/xAAZAQACAwEAAAAAAAAAAAAAAAAAAQIDBAX/xAAlEQEBAAICAgEEAgMAAAAAAAAAAQIRAyESMUEEEzJRImFCUpH/2gAMAwEAAhEDEQA/APq0I4GWoERIyUCIBC0JIxWgEYSVoWgCjEI4ApIRTHjuK0aX+Y4W2pJDEADqwFhA9N8c8zhO3WAep7I11R+XtO6p/wB2w9SJ3sTjqdNc9R1Vd7swA9OsR6aYTDg+K0atzSqK+U5TlIOv5TbmgRxyOaGaAOEV4XiByQkRHAhaO0IRArRwhACEIQAhHFAIRRwMmEbQMcIjRIikjI2jIoRwgCleIrqilnICgXJPSWEz5v8AaxxoKiUVJublgOgGxt+9ordQ8ZuqO1f2nZGanhACo09o2tzzyr08TPm3Gu0NfEEs9Qm5vlJ7vTRZ0eBdnamJ1YZVPhbX0ntsD2JoLbMuY+MzZc0jVjw2vlGFztZSCenUeU7L/wAUyrTLvkTZWY5QLcr7chPqeG7KUF1VAPwms9m6J0ZdPxlf3v0t+x+3yPhtWrSJNOqysR1IBvvrz2Gs9fwr7QsRT7tYBxcd46Gw0t9PjPWv2Uw5FslvLQzx/aXsg1PvU1uo2IsSvjY/WSx5kcuB7bgvbKnVUmqUpHQAO4ufynqKdUHUG4Ouk/OiOaZsykm+zWyk+IOx+M+nfZzxuo6GlUK5VtkAIuANMthymjHPbPnhp9BvGGlQePPLFS4NJAzOKksV4rAvEJFTJXkSELRwgChHCAKEcIBXCEJIyikpEwBQMcRgCtCIGO8CYeM49KFJ6rnRRp1LcgPGfG0oPja9SrVFxdhYbBbkWHlv6zvdveNe2xIw6ElENjbmxtrCgn8FVGcf4Na3etotQ9T0Og81/wBUy8/JfUbODjnutnDMHVwostM16X8pplFqgG2jqxCvb+oEHwnSXjtEf5gq07b+1o1UH/6K5T8ZppVAuoI9mdfut0PQeM3Zx1Eyb37bta9Odhu0OHfSk4c7d2w/uInRouz66Af6SD8TM1fC0X99Eb7yqT84k4NRPuqU+4Svyi7N16dLrJVaQIsRcbTlpSqUvdrZl6VQNvvLa3wl2G4zTY5SVD9AwOsnL8IWPHdruyoJLU+e35H5zz+HZ6QBU2ZTa9yDcHTwPL0I8p9bxtEPTI6gz5hjqSsatN7jT2gt1FrkdeZt4SUtlV5SWPoHZ7ihrUVZvf2bz2v8p1M8+ffZxj2DPh6ljvURl10vYg/BdfET6BOhjdxzs5qnmltOpKJJZJFtp1JcrTGhl6mKheDJAypTJgyJJQgI4AoRwgFUIQkjEUcRgCMiZIyJgESZCo9gfImSMoxfuN5GIafF8FTNTiBvuXPiBrmP909px/HGxw9GmKtVhZgwBRUO2breed7OUc2PqOB3VLkeOpA+k9lTprRTvWNRznduZY/ltOdnlN7dPixtkkfP6nZPiCr3Xum+VCMwHQHciX8Iw1SkwLVmIBsyPmDKfI+k9FxHtDTpAlnRfM2Om8y4bjOHxOmdDU/lscrEHXzt4yFztnpfOOY/L2GFqU2UMp1+H1mitTOQ2NidJ5/Du1AA3z09Cb+8vw3H0no/aBkFtjreGOW0bNPE4/so1Qk1K7a7gX1v6y3A9jqCqVzFj4zXxrtBSolkJJcAsVUFmCgE3IG2gO+9tJwcD29w+cgl1I3zLmW1gfeQm2+/KF8769JSYfN7epwVCthBdWNXDH3gTmdPFfDwnm+12GFKstVRdDZtOaHRreBB+ZnqODcXSobo6tTbUWIIvzFx+9ZLtPwoPRsOQIHgu9vlaPe+4jljq6rxXYlzTxhSwKsGIPQWvp4HTSfTZ817GvlxSKbE5XpNz0ALKwv4qB6z6UJv4bvFzeaayAklkZICXKFyS5TKElywOLFMtWUiWKZElgjkZKIHCO0IBTCO0JIyMIQgETImSMRgEJVXW6kHpLpCoND5RbG3znsdhbV65OtnK/BmnS7T4KrWXLScoebAAkDwvzmXs7VIxOIzaEsW2tsxU6enznoE1NzOXn707HFjdSvDYbsJTBDVM1V7kl3azkkZdWWxItyvadXBdmqaZRkSyG6i3unqPHb4T09TTaRwy63MVyt62n4Sd6ZKVG5y20Bvp+950KNHIMovkPLmvW3hOXhu0VFq1XD07mrRAL3UgWbo2xMto9paT4k4RlqCqE9oGK2QgWvlbwuI8cYV3VuK4OrnNprrcb/HnM//ALapH3wDfqFnRSrmZguhU6jkbi9x03loxFvfGU9ToPjtDo5jkycP7M4elc0lyE81sNes3VqLhSNCtufK375aS6nXW3vD4iL+KU6L3vud4fEaSc0ruNtfJ6FFxjnWmctQf4qC/vEDvIvja5sd9Z9B4TxM1E1ADDRgSd/UfjPA8apuMddKVRm0NqQLFbEjNcA2/Se0w+GbSqn+YujixGcEXDWO1xbTkb9NLuLLU3Gblxl6rtpXHl5/ntNAmTB1w63+I8ZqVbbbdPy6TXLubZMppassWVrJiPaC0GSUytZMRBcDJiVLLBESy0I7QgelMVo4SQRhJWiMAiZEyURgEbSrFVQqliQABudB6mXGYeM0M9F1G5HzkM7ZjbEuOS5yX1t5LDUMtc1LgpUz2K7WYht+lwR6ztYXUXg1MK6KB/p8AAugtNy0wJzLLbt2scphNK1pSFWlvYzURpMHEsclFSzn05mPXRS3K9M+F4cgLsQMzAAkCxsNrnnvLX4cjWZDZgCLgAnKbEgE7bCeXoY3F4picOoCDm3dHkDbXaWZeIYe1U5WW2YqpzWW1zfTWVzXrTTeOT/Ob/T2FGmF5HXcnWaFp3nJ4Px+nXUfyvzU/hO5TtaXTV9MmflhdZTtnNBd7D4CAEvdZWw0MY8+nEFB2zCgyrVs12y5rNa6Kwvt+ct4ViTUSlVZSrVEAYHrqQfkfjOBXSrQxzmkGC1KgYX2YEC/pe89bXUBTYbd6w8De0Pp93O/0j9XJjxz+0a+F1zpo3Mcm8/HxlmGrhtNmG4MuTaUYih/MvvD0v69Zvs13HNl31WkCWCZsLWzefPkZqAjlQs0kBJRCSjRSEsUysSaRBbeORhAIxRmKPYERjgYBEyJkrRQCMi4uJOIxBw6lBjUBBFgbn8rTYI8bh21ZNb7gWB9LzJw3E56atdSdmKMrDONGF1JG/KYssPGunjy+cjU5nnONcBNdixqEAjLl5DxBGoM9C0areUWbq7j5Lhdx4ynwerRFkZ8tgoy1G2Gw3hS4a5IBuQP6iTblprppPZMl41pCL7bXPrspPU/44mD7NUrq1iCpuMhyC/iBvPQUhl0lipYSuoZZ467Y8+XLkvaZMoxVQBQObEAfX8Iw85fH2pCk9au7U6VEXDJuHNhcAA3NyqgdSZKS30h5TH36aFNKpkqKFLDY67eQ3m0re/jOZ2cFJ6KVKTBwRlzDqvdYW63E64E08OFk3flm+p5ZndY+ojTSwk7RwEuZWXEYc3zp73McmH5+Pp0tpw1YOtx5EHkehk1EprYU3z0iA/MH3XHQ9D0MWtdw976rUBJTPSxiHut3H/pfQ+nJvSaCI0bNGJNZAsBvp56SSVV/qHxEBpZCGYdRCAKEIQIRRxQAMjeSkSIAjEY4QDmdosI9XC16dIkVHpOqkHL3ipsL8r7es8J9jjNUpYlXvcPTe7XLZ2Dhr33PcE6/wBonY2vxBqJp1UFNAQ1OsWC3Jv7RQAbtbTXoJu7DdlDgFqg1RUNQpcKhQKUzaC5N/f8JCzd7Tl1Om7EVTTNm+I2la8QXrNvEqdyPK37+M5GIwinlMXJj43p0OLLyxlrUeKr1EpqcZRf5hOBjcBba85/8I3jKvOr5jHqT2hQ85D/ANbU6CcPD4EncTvcNwSjYCEuVFkjo4EM+pFhPPfa0luGVbcqlE6eNVR+M9lQSwmfi3DaeJpPQrAmk4AYA5ToQwsRsbgTZw4sXPlt5X7PeJ4YYelhxiUfEnMxQZgb6mwuBeygfOeytPJcC+z/AAmHrJiKZqllGZVdwVDFbX90E7nnPXy/CWRmy9lGJICSCySJKJYoiVZYBAkXpg7i/nKP4JOQA/2ofqDNUIGzphVG3yAX+0CaAohJCBFlhJWhAuyhCF4AjFGYoARERxGAK0LSQELQCMrpHvMPG/yA6+HhLrTKEYv7oAGtxz38YqlIXEF0B8Zy2SdbiXujz/AzmTLzfk2cH4sVfD3lAwonQeV3lGo1S1FMJNuGoWhRmlZKYq8sq0UhFbpvEjRgkaiaOO6ZuSbIUioAPSO0Zcm1ztCaJ6Z6FloErEmIEsAjkQZKBCKOEABJCAEkIArQkoQCowiheBHFCQrVgu+/IDcwt0clvUTmXE4og2QAkbltvKYsZWqHVXynkBt69ZjqYt9mGToRqpP4evxmbk5+umzi+l73k6v8ewGqD0b9IUuKIXCMCrN7t7WJ6XHOeXbH1XPs1KrUzBf8S+UXNg2ms6ePwzEGm3vplYMvdvcmxW+x7p/WVTn5Pfwuy+m4p1eq9HHecLBcRLP7KrnD2uCCFB010ABGx6zo+xXpf713/uvNeOfl3GHPjuF1UOJV1KgBgTfUAgkaGYZp4g2ijlqf385lDTNy/k18M/gqqiVATRUEqMqXNVCaVMy0mloaWRXWlTLE1EoVovbH3V947eA6xXLxKY7XUmuLyyCIAAOmkcv4+XrWSjPi/wBQJNRIRgy/ahaBHaRVpMGBCOEkIEQEkBASUALQjtCAZoAQtJQJnxNbLoPePyHWczHYsUwWa58QCx+U2Yv3z5D6TjceYLSLNmBBFiASAdtegmXlyvbofTcePTymN7TucSoXuIoIY1u6HzagKOum/nPS8K4iKwN8pFyO6cwI85814zjjUq5Le6MhY7NfvadTPpXA+Fn+EwzUQpIp6gWW+Zix1va4LEG8zYTLK1tzuGGpWXEYIGn7ddlLIw60wxFx5byDY2piqlejUXMq0aLIAbXZWOZxfYk2+AnVwlX/AAmzCwYucptsWO9tJ4TtDUayexcgkZGFyA9O+ga3lI5Za6Pw8u/16e14DWRj7JHzmmLswOcIdrBjuTmPwO87ftLDcWG5c2067TwHDMSaFNsoylwHa29hoo9bsZv7J8Tarhg9UZnao7Jm2FMkhfPYaTTx5eOEY+bj8s7Y9FjamYrqBmsoGtxfn5SpKdmIzKSDa17G48DMPEKRYX66+MvxNKmxGJtnqZQcvLOotc/LSVW222pSeMkjZU00Oh8f34Skzm4dDVdajg52F2BN7W2FuU6X8IvS3lp9Ip5X0n1Pa1BHntCnh+QLfEy1cEu5Fz/qJb6yU8qj1BRct7u3U7enWacPSC7ak7k7mMLaMCSmHzfaG1sFkVMmslokwIssRa0Rf0k8bfhVljKd5JWlV4CX+SF4mlWlqmZVMtVpKXarLGxeI5BXkwYIJRRQgFMcIQJhxg73oPxkatIMhU6ggiWY33h5fjHSmfKd1s4rrGPj/G+ENSrFyScxIN+R208J6Ls9WrqoVKrCnqcultd7dJ3+0nCsxDhbjZwN7cmHiJZw/gwABDaHkRrM3hZl03+eNx3kyYgA0t7d22mmp/SeaqYdTZjooN7c7dPlPaY/h1NVOgues8Xjjdsq7besV47ubWzllxukHGZa1Tc5WCj7oIA+N50+yWFNKhTRt1AEzYPC+8m/vfEj9Z6bA01KKw5gH0Il2UrPqaTqLffyl1GiAABA05dRTnIyI30KeFCkkbmTZJYHlVV7mTupFfdopzSJVQWWxSU7orxxWkS9pLVLcTEDU5CZzWvoPj+UWe0cxDQXt5yJq6+P0mcv8foIi1tpMaXmraI1jM5PWSQdYbPUjXTqnnJV3fKfZKrPyDkqvqQDrM6vfUbbDxP5TTSkcs9dRC4yraNQkAsLHmPGXK8gmsi2ktwz2zZ4a7aM8Jnzwk1a+EI4IMXEN19fwldN5djtSB4H8JnQWmfO/wAq18X4xpYaSK6SqpW5SivWyqWJsACTK/JdMbpj7RY0LTJOw+Z5Aes8Ngrs1zve8v41xJq7W2Rdh1PUy7hGFtHO+2iY+M07mFpBSDbUjN8D+ok+Cvb2lI706jKP+m3fT5Nb0knFgp6HKfI6fW0jRTLiL8qlP/vpn6kP/wBseRXuOqJaDKxAGJWkY0URCSAhrdKrBJSKyV5NXadpmrvc2EnVqchKbRnjPkLKa1YKMx8lHVj+/rLT/wAzO9POQx2Huj8YLZDRjz33MmGjKyNrQM80M/5SFpTUexNuXdH3v+T8oE6OGH5D8T8fwmlTKqQAAHIC0ZeV3tVvttpNJ1CDMiPLM8N6Rs3UbGOSzQln3VX2mqEI5ezMGLPe8gBMxW5ky1y3mfrJU11mO3db8Z4yKTR11JnB7T4myhBz7x8l/X6T0tcTw3HahbE5emWn8QCf7jI670uwu+6x4TDXNzznosBhrC8z0MLtOwigACWxZlVLpcEeo8/3aV1Toj/0sD/tPdPya/pNRlKoDdTtqp8j+hhUXQVJILFhWuoJ3tY/eGh+YMuENKbdIZZNRGBJRzErkMsqrPJVKltt5lJ+MYk32cDCBHIep/AQTiOW+nIb+JkwJPLYWEFEBs8syHUzRVewv6SoLZddzGcQdgBfkLn0Gs59Ik+zB3ZgT6AufpLeIVO4w5myerH8pZg6d6o6Ih+LEAfJWiy9HepXSERllpAypREllgMggkxI1JO8IrwgG+EITc57lfzN94/WWUt4QmGe3RvoYieC4h/8z/7f/ARwhPazjd/DzSI4S6JUSvmf3yEIRFG7B7H7zfWXLCEam+6sETQhJIs1TcysRwiWxJN4UufmfrCEYWGI7whESmruP3zEnV2hCNL4jj8Q/l/6i/Qzfw733+6n1qQhI5ejz/F0DK2hCQU4+1ixmEJDI4nCEIB//9k="},function(e,t,a){e.exports=a.p+"static/media/pose8.2c022f2d.jpg"},function(e,t,a){e.exports=a.p+"static/media/pose9.db68f59c.jpg"},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/plane.2947f318.jpeg"},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),_=a.n(n),r=a(18),s=a.n(r),o=(a(27),a(6)),c=a(7),i=a(9),u=a(8),l=a(10),d=a(2),m=a.n(d),p=a(3),b=a(19),h=(a(29),a(4)),E=a(12),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).config={rate:30},a.isMobile=function(){return/Android|webOS|iPhone|iPod|BlackBerry|iPad/i.test(navigator.userAgent)},a.isWx=function(){return/MicroMessenger/i.test(navigator.userAgent)},a.state={displaySize:[224,60],displaySub:[{id:"up",title:"\u57fa\u672c\u52a8\u4f5c",total:0},{id:"right",title:"\u52a8\u4f5cA",total:0},{id:"left",title:"\u52a8\u4f5cB",total:0},{id:"down",title:"\u52a8\u4f5cC",total:0}],modelAct:!1,trained:!1,delay:!1,rate:!0,capturing:!1,countDown:0,cameraError:!1,loadModelAble:!1,loadModel:!0,loadMethodSelect:!1,saved:!1,named:!1,acc:null,predictAccs:[0,0,0,0]},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return _.a.createElement("div",{className:"core"},_.a.createElement("div",{className:"display"},_.a.createElement("div",{className:"display-item display-main"},_.a.createElement("div",{className:"display-inner"},_.a.createElement("div",{className:"view"},_.a.createElement("div",{className:"info",id:"status"},"\u521d\u59cb\u5316\u795e\u7ecf\u7f51\u7edc..."),_.a.createElement("div",{className:"info",id:"no-webcam"},"\u68c0\u67e5\u8f93\u5165\u8bbe\u5907"),this.state.delay&&_.a.createElement("div",{className:["info","countDown",this.state.countDown?"act":""].join(" ")},this.state.countDown),_.a.createElement("div",{className:"view-content"},_.a.createElement("video",{id:"webcam",autoPlay:!0,playsInline:!0,muted:!0,width:this.state.displaySize[0],height:this.state.displaySize[0]}))))),_.a.createElement("div",{className:"display-item display-sub"},_.a.createElement("ul",null,this.state.displaySub.map(function(t,a){return _.a.createElement("li",{className:"display-sub-item",key:a},_.a.createElement("div",{className:"display-inner",id:"display_"+t.id},_.a.createElement("div",{className:"view",style:{display:"none"}},_.a.createElement("canvas",{id:t.id+"-thumb",width:e.state.displaySize[1],height:e.state.displaySize[1]})),_.a.createElement("div",{className:"info"},_.a.createElement("div",{className:"title",onClick:function(){return e.nameIt(a,t.title)}},t.title),_.a.createElement("div",{className:"sub"},!e.state.modelAct&&_.a.createElement("span",null,"Train: ",_.a.createElement("i",{id:t.id+"-total"},t.total)),e.state.modelAct&&_.a.createElement("span",{id:t.id+"_acc"},"Acc: ",e.state.predictAccs[a])))))})))),_.a.createElement("div",{className:["panel",this.state.capturing?"disable":""].join(" "),id:"controller"},_.a.createElement("div",{className:["function-group train",this.state.loadModel?"":"act"].join(" ")},_.a.createElement("div",{className:"check-groups"},_.a.createElement("span",{className:"check"},_.a.createElement("input",{id:"check_delay",value:this.state.delay,type:"checkbox",onChange:function(){e.setState({delay:!e.state.delay})}}),_.a.createElement("label",{htmlFor:"check_delay"},"\u5ef6\u65f6\u6355\u6349")),_.a.createElement("span",{className:"check"},_.a.createElement("input",{id:"check_rate",value:this.state.rate,checked:this.state.rate,type:"checkbox",onChange:function(){e.setState({rate:!e.state.rate})}}),_.a.createElement("label",{htmlFor:"check_rate"},"\u9ad8\u9891\u6355\u6349"))),_.a.createElement("div",{className:"panel-groups",onClick:function(){e.setState({modelAct:!1,trained:!1,saved:!1,acc:null})}},this.state.displaySub.map(function(t,a){return _.a.createElement("span",{className:"button",key:a},_.a.createElement("span",{style:{display:"none"},id:t.id}),_.a.createElement("span",{className:"control",onClick:function(){return e.capture(t.id,e.state.delay)}},t.title+"\u6355\u6349"))})),_.a.createElement("div",{className:["panel-button",this.state.trained?"act":""].join(" "),id:"train"},_.a.createElement("span",{id:"train-status"},_.a.createElement("i",{id:"train_info"},this.state.trained?"\u8bad\u7ec3\u7ed3\u675f":"\u8bad\u7ec3\u6a21\u578b"),_.a.createElement("i",null,this.state.acc))),_.a.createElement("div",{className:["panel-button",this.state.trained&&this.state.modelAct?"":"disable",this.state.saved?"act":""].join(" "),id:"save"},this.state.saved?"\u4fdd\u5b58\u6210\u529f":"\u4fdd\u5b58\u6a21\u578b")),_.a.createElement("div",{className:["function-group select",this.state.loadMethodSelect?"":"act"].join(" ")},_.a.createElement("div",{className:"panel-button",onClick:function(){return e.setState({loadModel:!1,loadMethodSelect:!0})}},"\u65b0\u5efa\u6a21\u578b"),_.a.createElement("div",{className:"panel-button",style:{display:this.state.loadModel&&this.state.loadModelAble?"inline-block":"none"},id:"load",onClick:function(){return e.setState({loadMethodSelect:!0})}},"\u8f7d\u5165\u6a21\u578b")),_.a.createElement("div",{className:["panel-button",this.state.modelAct?"act":"",this.state.trained?"":"disable"].join(" "),id:"predict",onClick:function(){e.state.trained&&e.setState({modelAct:!0})}},_.a.createElement("span",null,"\u542f\u52a8\u795e\u7ecf\u7f51\u7edc"),_.a.createElement("span",null,"\u5df2\u542f\u52a8"))))}},{key:"capture",value:function(e,t){var a=this,n=0;t&&(n=3,this.countdown(n+1,"countDown")),setTimeout(function(){var t=10,_=50;a.state.rate&&(t=a.config.rate,_=20),a.autoClick(e,t,n,_)},1e3)}},{key:"countdown",value:function(e,t){var a=this,n=setInterval(function(){e--,a.setState(Object(b.a)({},t,e)),e<=0&&clearInterval(n)},1e3)}},{key:"autoClick",value:function(e,t,a,n){var _=this;this.setState({capturing:!0}),setTimeout(function(){var a=0,r=setInterval(function(){a++,document.getElementById(e).click(),a>=t&&(clearInterval(r),_.setState({capturing:!1}))},n)},1e3*a)}},{key:"nameIt",value:function(e,t){console.log(e,t);var a=prompt("\u81ea\u5b9a\u4e49\u52a8\u4f5c\u540d\u79f0",t),n=this.state.displaySub;n[e].title=a,this.setState({displaySub:n,named:!0})}},{key:"componentDidMount",value:function(){!function(e){var t=localStorage.getItem("shakeYhead");t?(e.setState({loadModelAble:!0}),console.log(JSON.parse(t).actions)):e.setState({loadMethodSelect:!0,loadModel:!1})}(this),this.isMobile()&&this.setState({rate:!1});var e,t,a,n,_=this,r=["up","down","left","right"],s=4,i=[0,0,0,0],u=new(function(){function e(t){Object(o.a)(this,e),this.numClasses=t}return Object(c.a)(e,[{key:"addExample",value:function(e,t){var a=this,n=h.j(function(){return h.f(h.i([t]).toInt(),a.numClasses)});if(null==this.xs)this.xs=h.a(e),this.ys=h.a(n);else{var _=this.xs;this.xs=h.a(_.concat(e,0));var r=this.ys;this.ys=h.a(r.concat(n,0)),_.dispose(),r.dispose(),n.dispose()}}}]),e}())(s),l={},d=function(){return 1e-4},b=function(){return.4},f=function(){return 50},w=document.getElementById("status"),v=document.getElementById("up"),D=document.getElementById("down"),O=document.getElementById("left"),g=document.getElementById("right"),A=!1,k=!1;function P(){return M.apply(this,arguments)}function M(){return(M=Object(p.a)(m.a.mark(function t(){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.capture();case 2:return a=t.sent,n=h.j(function(){return a.expandDims(0).toFloat().div(127).sub(1)}),a.dispose(),t.abrupt("return",n);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function y(){return(y=Object(p.a)(m.a.mark(function e(a){var n,_;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:A=!0,n=r[a],_=document.getElementById(n+"-total");case 3:if(!A){e.next=11;break}return t(a),document.body.setAttribute("data-active",r[a]),_.innerText=++i[a],e.next=9,h.e();case 9:e.next=3;break;case 11:document.body.removeAttribute("data-active");case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t){if(null==l[t]){for(var a=document.getElementById(r[t]+"-thumb").getContext("2d"),n=new ImageData(224,224),_=e.dataSync(),s=0;s<50176;++s){var o=4*s;n.data[o]=127*(_[3*s]+1),n.data[o+1]=127*(_[3*s+1]+1),n.data[o+2]=127*(_[3*s+2]+1),n.data[o+3]=255}a.putImageData(n,0,0)}}function U(){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.c("https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_0.25_224/model.json");case 2:return t=e.sent,a=t.getLayer("conv_pw_13_relu"),e.abrupt("return",h.d({inputs:t.inputs,outputs:a.output}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(){return B.apply(this,arguments)}function B(){return(B=Object(p.a)(m.a.mark(function e(){var t,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=u.xs&&!_.state.trained){e.next=2;break}return e.abrupt("return");case 2:if(document.getElementById("train_info").innerText="\u8bad\u7ec3\u4e2d...",(a=h.g({layers:[h.b.flatten({inputShape:n.outputs[0].shape.slice(1)}),h.b.dense({units:f(),activation:"relu",kernelInitializer:"varianceScaling",useBias:!0}),h.b.dense({units:s,kernelInitializer:"varianceScaling",useBias:!1,activation:"softmax"})]})).compile({optimizer:h.k.adam(d()),loss:"categoricalCrossentropy",metrics:["accuracy"]}),(t=Math.floor(u.xs.shape[0]*b()))>0){e.next=8;break}throw new Error("Batch size is 0 or NaN. Please choose a non-zero fraction.");case 8:return r=0,e.next=11,a.fit(u.xs,u.ys,{batchSize:t,epochs:30,callbacks:{onBatchEnd:function(){var e=Object(p.a)(m.a.mark(function e(t,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:2===t&&(r=" (\u51c6\u786e\u5ea6:"+((parseInt(1e4*a.acc)/1e4).toFixed(4)-1e-4)+"%)");case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}});case 11:_.setState({trained:!0,acc:r});case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return S.apply(this,arguments)}function S(){return(S=Object(p.a)(m.a.mark(function e(){var t,s,o,c,i,u;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=20;break}return e.next=3,P();case 3:return t=e.sent,s=n.predict(t),o=a.predict(s),e.next=8,o.as1D().data();case 8:return c=e.sent,_.setState({predictAccs:[String(c[0]).slice(0,5),String(c[3]).slice(0,5),String(c[2]).slice(0,5),String(c[1]).slice(0,5)]}),i=o.as1D().argMax(),e.next=13,i.data();case 13:return u=e.sent[0],t.dispose(),document.body.setAttribute("data-active",r[u]),e.next=18,h.e();case 18:e.next=0;break;case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(){return(L=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.state.trained){e.next=6;break}return k=!0,e.next=4,T();case 4:e.next=7;break;case 6:alert("\u65e0\u6cd5\u542f\u52a8\u672a\u7ecf\u8bad\u7ec3\u7684\u795e\u7ecf\u7f51\u7edc");case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=Object(p.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.b(document.getElementById("webcam"));case 3:e=t.sent,t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0),document.getElementById("no-webcam").style.display="block";case 10:return t.next=12,U();case 12:if(n=t.sent,document.getElementById("controller").style.display="block",w.style.display="none",!e){t.next=23;break}return t.next=18,e.capture();case 18:a=t.sent,n.predict(a.expandDims(0)),a.dispose(),t.next=24;break;case 23:document.getElementById("controller").style.display="none";case 24:case"end":return t.stop()}},t,null,[[0,6]])}))).apply(this,arguments)}function j(){return(j=Object(p.a)(m.a.mark(function e(){var t,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.isWx()){e.next=3;break}return alert("\u5fae\u4fe1\u6d4f\u89c8\u5668\u65e0\u6cd5\u50a8\u5b58\u6a21\u578b\u6570\u636e"),e.abrupt("return");case 3:if(_.state.named){e.next=6;break}return alert("\u4fdd\u5b58\u6a21\u578b\u524d\u81f3\u5c11\u4e3a\u4e00\u4e2a\u52a8\u4f5c\u81ea\u5b9a\u4e49\u547d\u540d"),e.abrupt("return");case 6:return e.next=8,a.save("indexeddb://shakeYhead");case 8:t=e.sent,console.log("\u4fdd\u5b58\u7ed3\u679c",t),t.modelArtifactsInfo.dateSaved&&(_.setState({saved:!0}),(n=_.state.displaySub).map(function(e,t){return e.total=window.totals[t]}),console.log(n),localStorage.setItem("shakeYhead",JSON.stringify({actions:n,date:t.modelArtifactsInfo.dateSaved})));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(){return(W=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\u8f7d\u5165\u56fa\u5316\u6a21\u578b"),_.setState({trained:!0,displaySub:JSON.parse(localStorage.getItem("shakeYhead")).actions}),k=!0,e.next=5,h.c("indexeddb://shakeYhead");case 5:a=e.sent;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}window.totals=i,function(e){t=e}(function(){var e=Object(p.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:a=e.sent,u.addExample(n.predict(a),t),I(a,t),a.dispose();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),[v,D,O,g].map(function(e,t){return e.addEventListener("click",function(){!function(e){y.apply(this,arguments)}(t),A=!1})}),document.getElementById("train").addEventListener("click",Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.e();case 2:return e.next=4,h.e();case 4:k=!1,C();case 6:case"end":return e.stop()}},e)}))),document.getElementById("predict").addEventListener("click",function(){return function(){return L.apply(this,arguments)}()}),document.getElementById("save").addEventListener("click",function(){return function(){return j.apply(this,arguments)}()}),document.getElementById("load").addEventListener("click",function(){return function(){return W.apply(this,arguments)}()}),function(){R.apply(this,arguments)}()}}]),t}(n.Component),w=a(13),v=a(21),D=(a(51),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loaded:!1,info:null,catching:!1,initState:!1},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.initState;return _.a.createElement("div",{className:["ssd",t?"":"disable"].join(" ")},this.state.info&&_.a.createElement("div",{className:"console"},this.state.info),_.a.createElement("div",{className:["display",this.state.loaded?"act":""].join(" ")},_.a.createElement("canvas",{className:this.state.loaded?"act":"",id:"cvs"}),_.a.createElement("canvas",{className:this.state.catching?"act":"",id:"cvsStream"}),this.state.catching&&_.a.createElement("video",{id:"webcam",height:320,width:480,autoPlay:!0,muted:!0,playsInline:!0}),_.a.createElement("img",{id:"demo",style:{display:"none"},src:a(52),alt:"demo"}),_.a.createElement("div",{className:"static"})),_.a.createElement("div",{className:"panel"},_.a.createElement("div",{className:"menu"},_.a.createElement("div",{className:["button",this.state.catching?"act":""].join(" "),onClick:function(){return e.camSwitch()}},this.state.catching?"\u6682\u505c":"\u5f00\u59cb"),_.a.createElement("div",{className:"button",onClick:function(){return e.upload()}},_.a.createElement("input",{id:"uploadPic",type:"file"}),"\u4e0a\u4f20"))))}},{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.next=4,this.test();case 4:this.setState({initState:!0});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"test",value:function(){var e=Object(p.a)(m.a.mark(function e(){var a,n,_;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.getElementById("demo"),n=document.getElementById("cvs"),e.next=4,this.ssd.detect(a);case 4:if(!((_=e.sent).length<1)){e.next=7;break}throw"\u672a\u68c0\u6d4b\u5230\u4efb\u4f55\u5bf9\u8c61";case 7:t.draw(a,_[0],n,!0);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"predict",value:function(){var e=Object(p.a)(m.a.mark(function e(t,a,n){var _;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ssd.detect(t);case 2:if(!((_=e.sent).length<1)){e.next=7;break}this.setState({info:"\u672a\u68c0\u6d4b\u5230\u4efb\u4f55\u53ef\u8bc6\u522b\u5bf9\u8c61"}),e.next=16;break;case 7:e.t0=a,e.next="label"===e.t0?10:"multi"===e.t0?13:15;break;case 10:if(!n){e.next=12;break}return e.abrupt("return",_.filter(function(e){return e.class===n}));case 12:return e.abrupt("break",16);case 13:return e.abrupt("return",_);case 15:return e.abrupt("return",_[0]);case 16:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({info:"\u8f7d\u5165\u6a21\u578b\u4e2d"}),e.next=3,v.a();case 3:this.ssd=e.sent,this.setState({loaded:!0,info:null});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webcamSetup",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t,a=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("webcam"),e.abrupt("return",new Promise(function(e,n){var _=navigator;navigator.getUserMedia=navigator.getUserMedia||_.webkitGetUserMedia||_.mozGetUserMedia||_.msGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({video:{width:480,height:320}},function(n){a.webcamStop=function(){return n.getTracks()[0].stop()},t.srcObject=n,t.addEventListener("loadeddata",function(){return e()},!1)},function(e){return n(e)}):n("\u6444\u50cf\u8bbe\u5907\u521d\u59cb\u5316\u5931\u8d25")}));case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"camSwitch",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({catching:!this.state.catching});case 2:if(!this.state.catching){e.next=11;break}return e.next=5,this.webcamSetup();case 5:t=document.getElementById("webcam"),a=document.getElementById("cvsStream"),this.catch(t,a),this.setState({info:"\u6c49\u5821\u4e0d\u89c1\u4e86\uff01\uff01\uff01"}),e.next=12;break;case 11:this.webcamStop();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"catch",value:function(){var e=Object(p.a)(m.a.mark(function e(a,n){var _,r=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.predict(a);case 2:_=e.sent,console.log(_),_&&(0===_.length?_=void 0:(_=_[0],this.setState({info:"\u5b89\u5168"}))),t.draw(a,_,n,!0),this.state.catching&&requestAnimationFrame(function(){return r.catch(a,n)});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=this,t=document.getElementById("uploadPic");t.onchange=function(t){if(!t.target.files[0])return e.setState({info:"\u6587\u4ef6\u65e0\u6548"}),void setTimeout(function(){e.setState({info:null})},3e3);e.reads(t.target.files[0]),e.setState({catching:!1})},t.click()}},{key:"reads",value:function(e){var a=this,n=new FileReader;n.readAsDataURL(e),n.onload=function(e){var n=document.createElement("img"),_=document.getElementById("cvs"),r=document.querySelector(".static");n.src=e.target.result,n.style.display="none",r.childNodes.length>0&&r.removeChild(r.firstChild),r.appendChild(n),n.onload=Object(p.a)(m.a.mark(function e(){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.height>300&&_.setAttribute("style","height:300px;width:auto"),e.next=3,a.predict(n);case 3:r=e.sent,t.draw(n,r,_,!0);case 5:case"end":return e.stop()}},e)}))}}}],[{key:"draw",value:function(e,t,a,n,_){var r=a,s=r.getContext("2d");if(r.height=e.height,r.width=e.width,s.font="24px",s.clearRect(0,0,r.height,r.width),n&&s.drawImage(e,0,0),t){var o=t.bbox;s.fillStyle="#b9465c66",s.fillText(_||t.class,o[0],o[1]-10),s.fillText(t.score,_?_.length+35+o[0]:t.class.length+35+o[0],o[1]-10),s.fillRect(o[0],o[1],o[2],o[3]),s.fill()}}}]),t}(n.Component)),O=(a(53),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).list=["\u5206\u7c7b\u5668\u8bad\u7ec3","\u59ff\u52bf\u8bc6\u522b","\u7269\u54c1\u8bc6\u522b"],a.state={index:null},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return _.a.createElement("div",{className:"App"},this.state.index?_.a.createElement("div",{className:"main-display"},_.a.createElement("div",{className:"back",onClick:function(){return e.setState({index:0})}}),1===this.state.index&&_.a.createElement(f,null),2===this.state.index&&_.a.createElement(w.default,null),3===this.state.index&&_.a.createElement(D,null)):_.a.createElement("div",{className:"main-panel"},_.a.createElement("div",{className:"title"},_.a.createElement("h3",null,"\u897f\u5c71\u5c45-\u7f51\u7edc\u5e73\u53f0-\u673a\u5668\u5b66\u4e60\u76f8\u5173")),_.a.createElement("div",{className:"menu"},this.list.map(function(t,a){return _.a.createElement("li",{key:a,onClick:function(){return e.setState({index:a+1})}},t)}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(_.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[22,1,2]]]);
//# sourceMappingURL=main.0fabdd6d.chunk.js.map